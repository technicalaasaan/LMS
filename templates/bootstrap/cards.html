{% extends 'bootstrap/base.html' %}
{% load static %}
<!-- Main Content -->
{% block page %}
<div class="container-fluid">
    <!-- Page Heading -->
    <div class="d-sm-flex align-items-center justify-content-between mb-4">
        <h1 class="h3 mb-0 text-gray-800">Cards</h1>
    </div>

    <div class="row">
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    fetch('/api/books/', {
      headers:{
          'Accept': 'application/json',
          'X-Requested-With': 'XMLHttpRequest',
<!--          'X-CSRFToken': csrftoken,-->
      },
      })
      .then(response => {
          return response.json() //Convert response to JSON
      })
      .then(data => {
          console.log('data', data);
          data.forEach((row) => {
                $('.row').append('<div class="card" style="width:400px">' + row.category + '\
                  <img width="200" height="300" class="card-img-top" src="' + row.title_image + '" alt="Card image">\
                  <div class="card-body">\
                    <h4 class="card-title">'+ row.title +'</h4>\
                    <p class="card-text">by, ' + row.author + '</p>\
                    <a href="#" class="btn btn-primary">Lease</a>\
                  </div>\
                </div>');
          })
      })
</script>
{% endblock %}